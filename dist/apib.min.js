!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios")):"function"==typeof define&&define.amd?define(["axios"],t):(e=e||self).apib=t(e.axios)}(this,function(o){"use strict";o=o&&o.hasOwnProperty("default")?o.default:o;return function(){function e(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.axios=o,this.version="0.0.3",this.options=e}var t=e.prototype;return t.log=function(){var e;this.options.debug&&(e=console).log.apply(e,arguments)},t._param=function(t){var o=[];return Object.keys(t).forEach(function(e){o.push("".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e])))}),o.join("&")},t._type=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","").toLowerCase()},t._args=function(e,t){var r=1<arguments.length&&void 0!==t?t:[],i={};r.forEach(function(e,t){if(-1<e.indexOf("=")){var o=e.split("="),n=o[0];r[t]=n;try{i[n]=JSON.parse(o.slice(1).join("="))}catch(e){}}});for(var o=0;o<e.length;o++){if("object"===this._type(e[o])){Object.assign(i,e[o]);break}"undefined"!==this._type(e[o])&&"undefined"!==this._type(r[o])&&(i[r[o]]=e[o])}return i},t._join=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];for(var n=t[0]||"",r=1;r<t.length;r++)t[r]&&(n=n.replace(/\/+$/,"")+"/"+t[r].replace(/^\/+/,""));return n},t.request=function(){for(var r=this,e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];var s=this._args(i,["url"]);if(!s.url)throw new Error("url is required");!s.method&&this.options.method&&(s.method=this.options.method);var a="number"==typeof this.options.code?this.options.code:1;return new Promise(function(o,n){r.axios.create({withCredentials:!0,headers:{"Content-Type":"application/json"},baseURL:r.options.baseUrl,timeout:r.options.timeout})(s).then(function(e){var t=e.data||{};+t.code===a?o(t):n(t),r.log("then",{response:e,args:i,options:s,res:t,raw:JSON.stringify(t)})}).catch(function(e){n(e),r.log("catch",{error:e,args:i,options:s,response:e.response})})})},e}()});
//# sourceMappingURL=apib.min.js.map
